# Custom Nginx include for home.sproutify.app
# This file is automatically included inside the server{} block generated by Plesk.
# Do NOT define your own server{} or listen directives here.
# 
# Add this content to: Plesk → Domains → home.sproutify.app → Apache & nginx Settings → Additional directives for nginx
# NOTE: Do NOT include a "location /" block - Plesk already generates one

# --- CRITICAL: Serve assets directory first (before SPA routing) ---
location /assets/ {
	root /var/www/vhosts/sweetwaterurbanfarms.com/home.sproutify.app/httpdocs;
	add_header Content-Type "application/javascript" always;
	try_files $uri =404;
}

# --- Force correct MIME types for JS and CSS files ---
location ~* \.(js|mjs)$ {
	root /var/www/vhosts/sweetwaterurbanfarms.com/home.sproutify.app/httpdocs;
	add_header Content-Type "application/javascript" always;
	try_files $uri =404;
}

location ~* \.css$ {
	root /var/www/vhosts/sweetwaterurbanfarms.com/home.sproutify.app/httpdocs;
	add_header Content-Type "text/css" always;
	try_files $uri =404;
}

location ~* \.svg$ {
	root /var/www/vhosts/sweetwaterurbanfarms.com/home.sproutify.app/httpdocs;
	add_header Content-Type "image/svg+xml" always;
	try_files $uri =404;
}

# --- Direct .html requests (optional, for cache control) ---
location = /index.html {
	root /var/www/vhosts/sweetwaterurbanfarms.com/home.sproutify.app/httpdocs;
	add_header Cache-Control "no-cache, no-store, must-revalidate" always;
	add_header Pragma "no-cache" always;
	add_header Expires 0 always;
}

